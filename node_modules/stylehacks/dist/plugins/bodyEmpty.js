'use strict';

exports.__esModule = true;

var _exists = require('../exists');

var _exists2 = _interopRequireDefault(_exists);

var _plugin = require('../plugin');

var _plugin2 = _interopRequireDefault(_plugin);

var _postcssSelectorParser = require('postcss-selector-parser');

var _postcssSelectorParser2 = _interopRequireDefault(_postcssSelectorParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var targets = ['firefox 2'];

function analyse(ctx, rule) {
    return function (selectors) {
        selectors.each(function (selector) {
            if ((0, _exists2.default)(selector, 0, 'body') && (0, _exists2.default)(selector, 1, ':empty') && (0, _exists2.default)(selector, 2, ' ') && selector.at(3)) {
                ctx.push(rule, {
                    identifier: 'selector',
                    hack: selector.toString()
                });
            }
        });
    };
}

exports.default = (0, _plugin2.default)(targets, ['rule'], function (rule) {
    if (rule.selector) {
        (0, _postcssSelectorParser2.default)(analyse(this, rule)).process(rule.selector);
    }
});
module.exports = exports['default'];